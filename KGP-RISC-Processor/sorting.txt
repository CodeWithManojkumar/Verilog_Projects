// Sorting a set of 10 integers using bubble sort
// arr -> Array
// arr[0] address - 100
// arr[] = [20, 50, 10, 30, 70, 40, 60, 80, 100, 90];
// The Whole Array is loaded into Data Memory in the testbench.


/* Instructions According to Processor */

ADDI  R1, R0, #100;    // arr[0]
MOVE  R2, R0;          // i=0
MOVE  R3, R0;          // j=0
ADDI  R4, R0, #10;     // n=10
ADDI  R5, R0, #10;     // n-i for inner loop
MOVE  R6, R1;          // for iterating addr by i
MOVE  R7, R1;          // for iterating addr by j
SUBI  R4, R4, #1;
MOVE  R3, R0;          // outer_loop // j=0               (X)
SUBI  R5, R5, #1;      // decreasing size for inner_loop
ADD   R7, R0, R1;      // resetting addr itr j
LD    R8, 0(R7);       // inner_loop // arr[j]            (Z)
ADDI  R7, R7, #1;      // addr itr j += 1
LD    R9, 0(R7);       // arr[j+1]
ADDI  R3, R3, #1;      // j++
SUB   R10, R8, R9;     // R10 = R8 - R9;
BMI   R10, #3;         // if R8 < R9 then Branch          (Y)
ST    R8, 0(R7);       // swap
ST    R9, -1(R7);
LD    R9, 0(R7);
SUB   R11, R3, R5;                                        (Y)
BZ    R11, #1;         // Exiting from inner_loop         (W)
BR    #-12;            // Address to inner_loop           (Z)
ADDI  R2, R2, #1;      // After  Exiting From inner_loop  (W)
SUB   R12,R2, R4;      // i!=n
BZ    R12, #1;         // Program Completed               (EXIT)
BR    #-19;            // outer_loop                      (X)
HLT;                                                      (EXIT)

/* Binary Code */

010000_00000_00001_0000000001100100
011010_00000_00010_0000000000000000
011010_00000_00011_0000000000000000
010000_00000_00100_0000000000001010
010000_00000_00101_0000000000001010
011010_00001_00110_0000000000000000
011010_00001_00111_0000000000000000
010001_00100_00100_0000000000000001
011010_00000_00011_0000000000000000
010001_00101_00101_0000000000000001
000000_00000_00001_00111_00000_000001
100001_00111_01000_0000000000000000
010000_00111_00111_0000000000000001
100001_00111_01001_0000000000000000
010000_00011_00011_0000000000000001
000000_01000_01001_01010_00000_000010
110001_01010_01010_0000000000000011
100010_00111_01000_0000000000000000
100010_00111_01001_1111111111111111
100001_00111_01001_0000000000000000
000000_00011_00101_01011_00000_000010
110011_01011_01011_0000000000000001
110000_11111111111111111111110100
010000_00010_00010_0000000000000001
000000_00010_00100_01100_00000_000010
110011_01100_01100_0000000000000001
110000_11111111111111111111101101
11111111111111111111111111111111